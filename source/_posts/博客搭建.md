---
title: 基于Hexo + Github + Next的博客搭建
top: 300
tags:
  	- 技能
categories:
	- [笔记, 业余笔记, 博客相关, 博客搭建]
abbrlink: 26832
date: 2021-10-28 09:26:30
comments: false
description: 本笔记主要记录本博客的搭建步骤以及搭建过程中出现的问题及其解决方案等，本博客是在Win10系统下基于主流的hexo + github + Next进行搭建的，本博客的设计理念是："一切设计都是为了简洁明了"。
---

## 主流博客框架简介

**现在主流的博客框架有：`Wordpress,Hexo,Jekyllrb,Hugo`**

-   **Wordpress**：

    Wordpress是一个基于PHP，用来搭建**动态**的博客的CMS系统。Wordpress也是一个开源的，可以使用Wordpress来制作网站，或者是App。Wordpress这个框架还是比较成熟的，使用的人也比较多，根据官网统计全球有38%的网站使用的都是Wordpress。

    Wordpress框架主要的作用是做新闻网站和博客网站，照这样分析，可以说是所有该类型的网站使用的都是Wordpress框架。

-   **Hexo**：

    Hexo是基于JS，是一款快速、简洁且高效的博客框架。Hexo支持Markdown，Hexo部署起来是非常方便的，可以部署到github、码云或是是云主机。

-   **Jekyllrb**：

    Jekyllrb是基于Ruby，同样也是一个静态网站生成器，它的使用与Hexo的使用方法很像，也是很简单的博客框架。

-   **Huge**：

    Hugo是基于Go语言的，Hugo在安装、创建新的页面、更换主题等的操作也是很方便，同样，几行命令就可以搞定。

>   **说明**：本笔记是基于**Windows10**系统搭建的**Hexo**框架博客，使用的是**Hexo**框架中的**Next**主题。

## Hexo框架的安装

### 1、相关安装包的下载和安装

#### 1.1、Git的下载和安装

##### 1.1.1、Git的作用

**Git是目前世界上最先进的分布式版本控制系统，可以有效、高速的处理从很小到非常大的项目版本管理，也就是用来管理Hexo博客文章，上传到GitHub的工具。**

##### 1.1.2、Git的下载

-   **官网下载**：[下载链接](http://git-scm.com/download/win)
-   **淘宝镜像下载**：[下载链接](https://npm.taobao.org/mirrors/git-for-windows/v2.33.0.windows.1/)
-   **Github下载**：[下载链接](https://gitforwindows.org/)
-   **百度网盘下载**：[下载链接](https://pan.baidu.com/s/1ncXfgf9OC0cMzIetQSaf2w)(提取码：`1234`)

>   **说明**：
>
>   -   根据自己`Windows`系统的位数，选择合适的安装包下载，官网下载以`Setup`结尾的即可，淘宝镜像下载`.exe`格式的即可。
>
>   -   在国内通过访问官网下载的速度会很慢，可以:smile:翻墙:smile:通过官网下载或者借助:smile:Github、淘宝镜像、百度网盘:smile:直接下载安装包。
>   -   本笔记是基于Git的`2.33.1`版本记录的，版本不同安装过程稍微不一样。

##### 1.1.3、Git的安装

1.  双击下载好的`.exe`格式的安装包，点击`Next`

![image-20211030094032171](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211030094032171.png)

2.  选择要安装的位置

![image-20211030094210880](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211030094210880.png)

3.  选择组件

    ![image-20211030094556966](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211030094556966.png)

4.  开始菜单目录名设置

    ![image-20211030094722386](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211030094722386.png)

5.  选择Git的默认编辑器：默认选择`Vim`即可

    ![image-20211030094957389](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211030094957389.png)

6.  Git仓库在`git init`操作后的初始分支命名问题，Git默认是`master`，可自行设置成自己喜欢的命名，此处设置无伤大雅，直接默认即可，并且后期也是可以在命令行中修改，如果需要，请自行百度搜索修改命令语句

    ![image-20211030095330066](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211030095330066.png)

7.  选择使用命令行环境即可

    ![image-20211030095856073](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211030095856073.png)

8.  以下7步默认设置即可，直接`Next`

    ![image-20211030100002551](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211030100002551.png)

    ![image-20211030100027336](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211030100027336.png)

    ![image-20211030100049550](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211030100049550.png)

    ![image-20211030100110335](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211030100110335.png)

    ![image-20211030100135518](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211030100135518.png)

    ![image-20211030100159669](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211030100159669.png)

    ![image-20211030100215951](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211030100215951.png)

9.  直接默认设置，点击`install`进行安装即可

    ![image-20211030100239331](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211030100239331.png)

10.  最后一步，点击完成

     ![image-20211030100542077](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211030100542077.png)

##### 1.1.4、检验是否安装成功

**回到电脑桌面，鼠标右击，在所列出的选项中会出现`Git GUI Here`和`Git Bash Here`则代表Git安装成功**

![image-20211030100948843](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211030100948843.png)

##### 1.1.5、Git初始化

-   **注册Github账号**：

    1.  登陆[Github官网](https://github.com)

    2.  注册步骤如下图，可自行注册，不必参考下图

        ![image-20211030203129955](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211030203129955.png)

        ![image-20211030203800029](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211030203800029.png)

        ![image-20211030204009682](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211030204009682.png)

        ![image-20211030204318493](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211030204318493.png)

        ![image-20211030204509595](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211030204509595.png)

        ![image-20211030204656951](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211030204656951.png)

        ![image-20211030204754586](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211030204754586.png)

        ![image-20211030205134826](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211030205134826.png)

-   **Git初始化**：在桌面右击选择`Git Bash Here`打开命令行进行如下操作

    1.  **设置用户名**：在`Git Bash`命令行中输入`git  config -- global  user.name  'Github注册的用户名'`，例如：`git config --global user.name dongqing1234`。

    2.  **设置用户邮箱**：在`Git Bash`命令行中输入`git  config -- global  user.email  'GitHub注册的邮箱'`，例如：`git config --global user.email "shoudongj@gmail.com"`。

    3.  配置ok后，在命令行中输入`git config --list`进行验证是否配置成功。

        ![image-20211030231211745](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211030231211745.png)

##### 1.1.6、使用SSH密钥链接Github

1.  **查看是否存在SSH密钥**：在`Git Bash`命令行中，执行`cd ~/.ssh`命令，如果`.ssh`目录中**存在`id_rsa, id_rsa.pub`两个文件**，则**不需要执行第2步操作**，否则需要进行第2步操作。

2.  **创建一对新的SSH密钥**：

    -   在命令行中执行如下命令，创建密钥

        ```shell
        ssh-keygen -t rsa -C "your_email@example.com"
        #这将按照你提供的邮箱地址，创建一对密钥
        Generating public/private rsa key pair.
        Enter file in which to save the key (/c/Users/you/.ssh/id_rsa): [Press enter]
        #此处直接回车，则将密钥按默认文件进行存储
        ```

    -   根据提示，需要输入密码和确认密码（其实可以不用密码，就是到输密码的地方，都直接回车，所以每次push就只管回车即可）。相关提示如下：

        ```shell
        Enter passphrase (empty for no passphrase): [Type a passphrase]
        Enter same passphrase again: [Type passphrase again]
        ```

    -   全部完成后，会输出如下信息：

        ```shell
        Your identification has been saved in /c/Users/you/.ssh/id_rsa.
        Your public key has been saved in /c/Users/you/.ssh/id_rsa.pub.
        The key fingerprint is:
        01:0f:f4:3b:ca:85:d6:17:a1:7d:f0:68:9d:f0:a2:db your_email@example.com
        ```

    -   命令行代码实例图：

        ![image-20211030235120833](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211030235120833.png)

3.  **在GitHub账户中添加自己的公钥**

    -   在命令行输入`clip < ~/.ssh/id_rsa.pub`命令，将公钥的内容复制到系统粘贴板中。

    -   登陆[Github](https://github.com)，进入个人账户设置，选择`SSH与GPG公钥`。

        ![image-20211030233958062](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211030233958062.png)

    -   点击`新建SSH密钥`。

        ![image-20211030234331181](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211030234331181.png)

    -   将复制好的密钥粘贴到到`密钥`输入框中。

        ![image-20211030235705776](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211030235705776.png)
        
    -   输入Github密码即可。
    
        ![image-20211031000032736](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211031000032736.png)
    
    -   最后进行测试，在命令行中输入`ssh -T git@github.com`命令，如果需要提供验证密码，输入上一步的密码即可。
    
        ![image-20211031001205880](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211031001205880.png)

#### 1.2、Node.js的下载和安装

##### 1.2.1 Node.js的作用

**在前面[主流博客框架简介](#主流博客框架简介)中讲到`Hexo`框架是基于`JS`开发的，所以`Hexo`框架的配置需要在`JS`的环境中修改，而Node.js 是一个基于 Chrome V8 引擎的JavaScirpt 运行环境**。

##### 1.2.2 Node.js的下载

**官网下载**：[下载链接](https://nodejs.org/zh-cn/download/)

>   **说明**：
>
>   -   下载长期维护版的`.msi`格式的安装包即可，比较稳定可靠。
>   -   本笔记是基于Node.js的`16.13.0`版本记录的。

##### 1.2.3、Node.js的安装

**除了安装目录按照自己的需求修改外，其他的全部按照默认设置安装即可。**



![image-20211030153815819](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211030153815819.png)

![image-20211030153907374](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211030153907374.png)

![image-20211030154010207](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211030154010207.png)

![image-20211030154057081](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211030154057081.png)

![image-20211030154300341](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211030154300341.png)

![image-20211030154351718](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211030154351718.png)

![image-20211030154441602](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211030154441602.png)

##### 1.2.4、检测Node.js安装是否成功

**使用安装好的Git进行检测，在电脑桌面右击选择`Git Bash Here`进入Git的命令行模式，输入`node -v`查看Node.js的版本，如果输出版本号就表示安装成功。**

### 2、Hexo框架的安装

>   **说明**：接下来的所有**命令操作**都是在`Git Bash`中进行的。

#### 2.1、检测

##### 2.1.1、检测Node.js的版本

**在`Git Bash`命令行中，输入`node -v`，输出版本号代表安装成功。**

##### 2.1.2、检测npm的版本

**在`Git Bash`命令行中，输入`npm -v`，输出版本号代表安装成功。**

>   **拓展**：	npm是随同Node.js一起安装的`包管理工具`，类似于360软件管家，能解决Node.js代码部署上的很多问题，常见的使用场景有以下几种：
>
>   -   允许用户从npm服务器下载别人编写的第三方包到本地使用。
>   -   允许用户从npm服务器下载并安装别人编写的命令行程序到本地使用。
>   -   允许用户将自己编写的包或命令行程序上传到npm服务器供别人使用。

#### 2.2、安装淘宝的镜像源`cnpm`

**因为npm的服务器位于国外可能会影响安装，可以借助淘宝做的国内镜像cnpm下载所需要的package包**。

**借助npm安装cnpm**：在`Git Bash`命令行中，输入

 `npm install -g cnpm --registry=https://registry.npm.taobao.org`即可安装。

**检验是否安装成功**：

-   在`Git Bash`命令行中，输入`cnpm`，输出cnpm信息
-   在`Git Bash`命令行中，输入`cnpm -v`，输出cnpm版本信息

**以上两个操作都返回正确信息代表安装成功。**

>   **说明**：如果错误就重来，因为连接可能不稳定。

#### 2.3、安装Hexo框架

**在`Git Bash`命令行中，输入`cnpm install -g hexo-cli`**。

**检验是否安装成功**：在`Git Bash`命令行中，输入`hexo -v`，输出Hexo的版本信息代表安装成功。

**本人`hexo -v`的返回信息**：

![image-20211030191225379](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211030191225379.png)

>   **说明**：如果错误就重来，因为连接可能不稳定。

#### 2.4、初始化过程

**在本地建立博客文件夹，文件夹的名字根据自己的喜好设置即可，本人设置成`Blog`，后面所有的插件安装等都是基于这个博客文件夹，如果重建博客，只需要删除博客文件夹即可**。

>   **说明**：
>
>   -   一定要保证所建的博客文件夹中为**空文件夹**，里面无任何内容，否则接下来执行`hexo init`操作会报错，会提示文件夹非空。
>   -   本笔记中所说的**站点目录**就是新建的**博客文件夹**，站点就是博客。

**接下来的操作步骤**：

1.  在新建的博客文件夹`Blog`中，右击鼠标，选择`Git Bash Here`进入Git命令行模式，要确保当前是在新建的博客文件夹中。

    ![image-20211030192841049](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211030192841049.png)

2.  在命令行中输入`hexo init`后回车，对应的博客文件夹中就会新增很多关于Hexo框架的文件。

    <img src="https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211030193055972.png" alt="image-20211030193055972" style="zoom:80%;" />

3.  在命令行中输入`hexo s`启动Hexo，在本地浏览器输入<http://localhost:4000>即可在本地4000端口浏览自己的网站。

    ![image-20211030193517056](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211030193517056.png)

    ![image-20211030193827087](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211030193827087.png)

## 部署网站到Github

### 1、创建Github仓库

**创建步骤**：

1.  在Github网站首页点击**新建仓库**

    ![image-20211030205535299](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211030205535299.png)

2.  以`自己的Github用户名.github.io`命名仓库名称，例如：`lisi.github.io`，同时一定要设置成公有，否则会造成博客访问不了

    ![image-20211030210513742](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211030210513742.png)

3.  记住下图的地址，后面需要用到

    ![image-20211030215905006](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211030215905006.png)

### 2、配置站点配置文件

1.  在创建的博客文件夹`Blog`中，找到站点的配置文件`_config.yml`，使用本地常用的编辑器打开进行配置站点。

2.  在打开的站点配置文件`_config.yml`中，搜索`deploy`找到下图中的代码段

    ![image-20211030221026359](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211030221026359.png)

3.  将该代码段改成下图的代码，需要添加`repo、branch`项

    -   `type`项的内容建议写成`git`便于识别；
    -   `repo`项的内容是仓库的地址，对应第3步中的地址，直接复制粘贴过来即可；
    -   `branch`项的内容设置为之前安装Git时自行设置的分支名字即可，默认设置是`master`；

    ```yml
    deploy:
      type: git
      repo: git@github.com:dongqing1234/dongqing1234.github.io.git
      branch: master
    ```

    ![image-20211030221718860](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211030221718860.png)

4.  更改后保存并退出，在`Git Bash`中输入`hexo d`将本地文件部署到自己的Github中新建的仓库中，命令执行完后可以通过访问<https://自己的用户名.github.io>，从远端访问自己的博客站点

    ![image-20211031001809287](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211031001809287.png)

    >   **说明**：
    >
    >   -   在之前在`Git Bash`中执行`hexo s`后，键盘输入`CTRL + C`即可退出。
    >   -   执行`hexo d`会提示`nothing to commit, working tree clean`，只需要依次执行`hexo clean, hexo g, hexo d`即可。
    >   -   执行完`hexo d`后，需要等一会才会完全部署到Github仓库中，因为Github的服务器部署在国外。
    >   -   执行完`hexo d`后如果报错`ERROR Deployer not found: git`，需要进行安装`hexo-deployer-git`插件，在博客文件夹下进入Git命令行输入`npm install --save hexo-deployer-git `，等待安装成功即可，然后再次执行`hexo d`。
    >   -   Hexo的命令：
    >       -   `hexo clean`：清除数据库缓存
    >       -   `hexo g`：生成静态网站
    >       -   `hexo s`：开启本地Hexo服务器，便于在本地预览站点
    >       -   `hexo d`：将现在的文件部署到Github中

## 更换Next主题

**Hexo 安装主题的方式非常简单，只需要将主题文件拷贝至站点目录的 `themes` 目录下， 然后修改下站点配置文件即可。具体到 NexT 来说，使用git克隆最新版本的Next主题的安装步骤如下**：

-   在站点目录下右击打开`Git Bash Here`，输入命令

    `git clone git://github.com/theme-next/hexo-theme-next themes/next`将主题克隆到本地站点中

    ![image-20211031090107552](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211031090107552.png)

    >   **说明**：
    >
    >   -   如果不成功，多次重复实验即可。
    >   -   注意是在**站点目录**下执行这条命令

-   将站点目录下**_config.yml**里**theme**的名称由`landscape`修改为`next`，然后保存退出

    ![image-20211031083910234](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211031083910234.png)
    
-   在命令行中依次输入`hexo clean, hexo s`就可以预览站点的Next主题

    ![image-20211031091240436](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211031091240436.png)

## 优化Next主题

### 1、更改Scheme外观

**Scheme 是Next提供的一种特性，借助于Scheme，Next提供多种不同的外观，几乎所有的配置都可以在Scheme 之间共用，目前Next支持4种Scheme**：

-   Muse - 默认 Scheme，这是 NexT 最初的版本，黑白主调，大量留白
-   Mist - Muse 的紧凑版本，整洁有序的单栏外观
-   Pisces - 双栏 Scheme，小家碧玉似的清新
-   Gemini - 导航栏、头像等基本信息在侧边栏上显示

**本人选择的是`Gemini`，简单方便**。

![image-20211031120446674](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211031120446674.png)

### 2、更改站点基本信息

-   打开**站点目录**下的站点配置文件`_config.yml`，然后查找`Site`，对应下图改成自己需要的即可，最后保存

    ![image-20211031094223392](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211031094223392.png)

    

-   打开**主题目录**下的`languages`文件夹，查看是否存在`zh-Hans.yml`文件，如果不存在将`zh-CN.yml`重命名`zh-Hans.yml`

    ![image-20211031093735188](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211031093735188.png)

-   在站点目录下进入`Git Bash`命令行，依次执行`hexo clean, hexo s`即可在浏览器通过[本地端口](http://localhost:4000)看到站点的变化

    ![image-20211031095109539](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211031095109539.png)

### 3、设置主题菜单

**菜单配置包括三个部分，第一是菜单项（名称和链接），第二是菜单项的显示文本，第三是菜单项对应的图标。 NexT 使用的是 [Font Awesome](http://fontawesome.io/) 提供的图标， Font Awesome 提供了 600+ 的图标，可以满足绝大的多数的场景。**

**主题菜单设置步骤：**

>   **说明**：
>
>   -   本笔记所说的**站点**配置文件`_config.yml`指的是站点目录下的`_config.yml`
>   -   本笔记所说的**主题**配置文件`_config.yml`指的是站点目录下`themes`目录下的`next`目录下的`_config.yml`

编辑`主题配置文件`，查找`menu`定位到主题菜单配置处，修改如下内容；

1.  设定菜单内容，对应的字段是 `menu`。 菜单内容的设置格式是：`item name: link`。其中 `item name `是一个名称，这个名称并不直接显示在页面上，她将用于匹配图标以及翻译

    菜单实例配置：不需要的菜单就注销掉

    ```yml
    menu:
      home: / || fa fa-home
      #about: /about/ || fa fa-user  //不需要的就注销掉
      tags: /tags/ || fa fa-tags
      categories: /categories/ || fa fa-th
      archives: /archives/ || fa fa-archive
      #schedule: /schedule/ || fa fa-calendar
      #sitemap: /sitemap.xml || fa fa-sitemap
      #commonweal: /404/ || fa fa-heartbeat
    ```

2.  设置菜单项的显示文本，在第1步中设置的菜单的名称并不直接用于界面上的展示。Hexo 在生成的时候将使用 这个名称查找对应的语言翻译，并提取显示文本。这些翻译文本放置在 NexT 主题目录下的 `languages/zh-Hans.yml` 中

    ```yml
    menu:
      home: 首页
      archives: 归档
      categories: 分类
      tags: 标签
      about: 关于
      search: 搜索
      schedule: 日程表
      sitemap: 站点地图
      commonweal: 公益 404
    ```

### 4、设置侧边栏

**可以通过修改 `主题配置文件` 中的 `sidebar` 字段来控制侧栏的行为，侧栏的设置包括两个部分，其一是侧栏的位置， 其二是侧栏显示的时机。**

-   设置侧栏的位置，修改 `sidebar.position` 的值，支持的选项有：
    -   left - 靠左放置
    -   right - 靠右放置

-   设置侧栏显示的时机，修改 `sidebar.display` 的值，支持的选项有：
    -   `post` - 默认行为，在文章页面（拥有目录列表）时显示
    -   `always` - 在所有页面中都显示
    -   `hide` - 在所有页面中都隐藏（可以手动展开）
    -   `remove` - 完全移除

```
sidebar:
  display: post
```

### 5、设置头像

**编辑 `主题配置文件`， 修改字段 `avatar`， 值设置成头像的链接地址。其中，头像的链接地址可以是**：

| 地址             | 值                                                           |
| :--------------- | :----------------------------------------------------------- |
| 完整的互联网 URI | `http://example.com/avatar.png`                              |
| 站点内的地址     | 将头像放置主题目录下的 `source/uploads/` （新建 uploads 目录若不存在） 配置为：`avatar: /uploads/avatar.png`或者 放置在 `source/images/` 目录下 配置为：`avatar: /images/avatar.png` |

>   **说明**：注意在主题配置文件中，修改`avatar`选项内容时，头像链接和`#`之间需要有一个空格。

### 6、设置 RSS

**NexT 中 RSS 有三个设置选项，满足特定的使用场景。 更改 `主题配置文件`，设定 `rss` 字段的值**：

-   `false`：禁用 RSS，不在页面上显示 RSS 连接。
-   留空：使用 Hexo 生成的 Feed 链接。 你可以需要先安装 [hexo-generator-feed](https://github.com/hexojs/hexo-generator-feed) 插件。
-   具体的链接地址：适用于已经烧制过 Feed 的情形

### 7、添加「标签」页面

**新建「标签」页面，并在菜单中显示「标签」链接。「标签」页面将展示站点的所有标签，若你的所有文章都未包含标签，此页面将是空的**。

**在站点目录下右击鼠标进入命令行，输入命令 `hexo new page tags` 新建一个页面，命名为 `tags`**。

**在站点目录中依次进入`/source/tags`目录中，打开`index.md`文件，修改为以下内容**：

```markdown
title: 标签
date: 2021-10-27 22:20:26
type: "tags"
```

### 8、添加「分类」页面

**新建「分类」页面，并在菜单中显示「分类」链接。「分类」页面将展示站点的所有分类，若你的所有文章都未包含分类，此页面将是空的。**

**在站点目录下右击鼠标进入命令行，输入命令 `hexo new page categories` 新建一个页面，命名为 `categories`**。

**在站点目录中依次进入`/source/categories`目录中，打开`index.md`文件，修改为一下内容**：

```markdown
title: 分类
date: 2021-10-27 22:22:31
type: "categories"
```
### 9、标签页美化

**主题配置文件 `_config.yml` 去除 `styles.styl` 的注释**

```yml
style: source/_data/styles.styl
```

<img src="https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211031151345121.png" alt="image-20211031151345121" style="zoom:67%;" />

**在站点目录下的`source`目录中创建`_data` 目录，在`_data`目录下新建 `styles.styl` 文件，填入下面内容**：

```stylus
.tag-cloud a {
    box-shadow: 0 1px 3px #6f42c1, 0 1px 2px #d9534f;
    padding: 2px 10px;
    margin: 8px;
    background: rgba(193,66,92,0);
    border-bottom: none;
    border-radius: 20px;
}
```

### 10、分类页美化

**在 站点目录下依次进行选择`themes → next → source → css → _schemes → (自己选择的Scheme)` 进入文件夹，用编辑器打开`index.styl `文件在最后新增如下样式**：

```stylus
/* 分类页样式 began */
.category-list-link:hover{
  transform: scale(1.1);
  box-shadow: 10px 10px 15px 2px rgba(0,0,0,.12), 0 0 6px 0 rgba(104, 104, 105, 0.1);
  border-radius: 15px;
  padding: 6px 16px;
  margin-left: 0px;
  font-size: 16px;
  transition-duration: 0.15s;
  //display:flex;
}
a.category-list-link:before{
  top: 10px;
  width: 18px;
  height: 18px;
  content: "📚";
  margin-right: 5px;
  font: normal normal normal 14px/1 FontAwesome;
  font-size: 15px;
  line-height: 18px;
}
/* 分类页样式 end */
```

**修改站点目录下的` /themes/next/source/css/_common/components/pages/categories.styl `代码，将`.category-list-child`的`padding-left`属性改为`60px`，可以更改子类与父类之间的间隔**。

![image-20211031122209809](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211031122209809.png)

![image-20211031122308556](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211031122308556.png)

>   **补充**：Hexo-Next分类多层级描述
>
>   1.  **分类一般用法**
>       Hexo中分类和标签有着明显的差别：分类具有顺序性和层次性，也就是说Foo, Bar 不等于Bar, Foo；而标签没有顺序和层次。
>
>       ```yaml
>       categories:
>       - Diary
>       tags:
>       - PS3
>       - Games
>       ```
>
>   2.  **父子分类**
>       Hexo不支持指定多个同级分类。下面的指定方法会使分类Life成为Diary的子分类，而不是并列分类。
>
>       ```yaml
>       categories:
>       - Diary
>       - Life
>       ```
>
>   3.  **并列+子分类**
>       如果需要为文章添加多个分类，可以尝试以下 list 中的方法。此时这篇文章同时包括三个分类：PlayStation和Games分别都是父分类Diary的子分类，同时Life是一个没有子分类的分类。
>
>       ```yaml
>       categories:
>       - [Diary, PlayStation]
>       - [Diary, Games]
>       - [Life]
>       ```

### 11、设置代码高亮主题

**NexT 使用 [Tomorrow Theme](https://github.com/chriskempson/tomorrow-theme) 作为代码高亮，共有5款主题供你选择。 NexT 默认使用的是 白色的 `normal` 主题，可选的值有 `normal`，`night`， `night blue`， `night bright`， `night eighties`**：

| ![img](http://theme-next.iissnan.com/assets/img/tomorrow.png) | ![img](http://theme-next.iissnan.com/assets/img/tomorrow-night.png) | ![img](http://theme-next.iissnan.com/assets/img/tomorrow-night-blue.png) | ![img](http://theme-next.iissnan.com/assets/img/tomorrow-night-bright.png) | ![img](http://theme-next.iissnan.com/assets/img/tomorrow-night-eighties.png) |
| :----------------------------------------------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: |
|                           `normal`                           |                           `night`                            |                         `night blue`                         |                        `night bright`                        |                       `night eighties`                       |

```yml
codeblock:
  # Code Highlight theme
  # Available values: normal | night | night eighties | night blue | night bright | solarized | solarized dark | galactic
  # See: https://github.com/chriskempson/tomorrow-theme
  highlight_theme: night
  # Add copy button on codeblock
  # 以下选项根据需要自行设置
  copy_button:
    enable: true  
    # Show text copy result.
    show_result: false 
    # Available values: default | flat | mac
    style: flat
```

### 12、代码行美化

**在站点目录下的 `source/_data/styles.styl` 文件中加入下面样式**：

```stylus
// 代码行样式
code {
	color:#c7254e;
	background:#f9f2f4;
	border:1px solid #d6d6d6;
}
```



### 13、添加站点内容搜索功能

-   安装 `hexo-generator-searchdb`，在站点的目录下右击鼠标打开`Git Bash`命令行执行以下命令：

    ```shell
    cnpm install hexo-generator-searchdb --save
    ```

-   编辑 **站点配置文件**新增以下内容到任意位置：

    ```yml
    search:
      path: search.xml
      field: post
      format: html
      limit: 10000
    ```

-   编辑 **主题配置文件**，查找`local_search`启用本地搜索功能：

    ```yml
    # Local search
    local_search:
      enable: true
    ```

### 14、设置首页阅读全文

**在首页显示一篇文章的部分内容，并提供一个链接跳转到全文页面是一个常见的需求。 Next提供三种方式来控制文章在首页的显示方式，在首页显示文章的摘录并显示 `阅读全文`按钮，可以通过以下方法**：

1.  在文章中使用 `<!-- more -->` 手动进行截断，Hexo提供的方式 **推荐**

2.  在文章的 [front-matter](https://hexo.io/docs/front-matter.html) 中添加 `description`，并提供文章摘录

3.  自动形成摘要，在 `主题配置文件`中添加：

    ```yml
    auto_excerpt:
      enable: true
      length: 150
    ```

**本人使用的是第二种，通过添加`description`的方式设置首页显示每篇博文的内容，因为尝试过第三种方法没有奏效，第一种又比较拉跨。**

### 15、设置博客文章持久化链接

1.  在命令行中输入`cnpm install hexo-abbrlink --save`命令安装`hexo-abbrlink`插件

2.  站点配置文件`_config.yml`修改`permalink`选项，修改内容如下：

    ```yml
    permalink: post/:abbrlink/
    abbrlink:
      alg: crc32   # 算法：crc16(default) and crc32
      rep: hex # 进制：dec(default) and hex
    ```

>   **说明**：需要注意，如果 `permalink` 设置为 `post/:abbrlink.html` 可能导致本地图片加载失败，尽量使用[图床](https://dongqing1903.github.io/post/44503.html#2、基于阿里云的对象存储OSS搭建图床的方法介绍)来管理自己的图片。

### 16、设置回到顶部按钮

**修改主题配置文件 `_config.yml` 中的`back2top` 选项，设置内容如下**：

```yml
back2top:
  enable: true
  # 将返回按钮设置在侧边栏
  sidebar: false
  # 按钮上显示进度百分比
  scrollpercent: true
```

### 17、修改文章内链接文本样式

**在站点目录下 `source/_data/styles.styl` 文件中加入下面样式**：

```stylus
.post-body p a{
  color: #0593d3;
  border-bottom: none;
  border-bottom: 1px solid #0593d3;
  &:hover {
    color: #fc6423;
    border-bottom: none;
    border-bottom: 1px solid #fc6423;
  }
}
```

### 18、去掉顶部黑线

**在站点目录下的 `/source/_data/styles.styl` 文件加入下面样式**：

```stylus
  //去掉顶部黑线：
.headband {display:none;}
```

### 19、更换Hexo的网页图标

**当套用完Next主题后，个人博客的站点图标会自动为Next的logo**

1.   制作favicon图标，这里提供一种制作方法[链接](https://www.bitbug.net/)，将下载好的图片分别命名为`favicon16.ico`和`favicon32.ico`，并将修改后的图片复制到`/themes/next/source/images`目录中

2.  打开next主题的`_config.yml`文件，`favicon:`有以下内容：

    ```yml
    favicon:
      small: /images/favicon-16x16-next.png  
      medium: /images/favicon-32x32-next.png
      apple_touch_icon: /images/apple-touch-icon-next.png
      safari_pinned_tab: /images/logo.svg
      #android_manifest: /images/manifest.json  
      #ms_browserconfig: /images/browserconfig.xml
    ```

3.  将步骤2中的对应内容修改为以下内容：

    ```yml
    favicon:
      small: /images/favicon16.ico
      medium: /images/favicon32.ico
    ```

4.  在命令行中依次输入`hexo clean, hexo g, hexo d, hexo s`就可以在本地和远端看到自己的站点图标变成自己设置的图标

### 20、设置左上角或右上角 github 图标

**修改主题配置文件`_config.yml`，启用 `github-banner` 如下**：

```yml
github_banner:
  enable: true
  permalink: 自己的Github地址(示例：https://github.com/dongqing1234)
  title: 
```

### 21、设置阅读位置标记功能

**在命令行中输入`git clone https://github.com/theme-next/theme-next-bookmark.git source/lib/bookmark`命令来安装模块到站点目录下的`source/lib `目录下**。

**编辑主题配置文件，启用 bookmark 模块，如下**：

```yml
bookmark:
  enable: true
  save: auto
```

### 22、目录设置

**主题配置文件 `_config.yml`，修改 `toc` 属性**：

```yml
toc:
  enable: true
  # 自动编号
  number: false
  # 超出宽度跨行
  wrap: true
  # 展开所有
  expand_all: true
  # 最大标题深度
  max_depth: 6
```

### 23、增加Valine评论功能

1.  注册leancloud，[leancloud注册网址](https://leancloud.cn/dashboard/login.html#/signin)

2.  注册登陆后，访问控制台，创建应用，选择开发版，创建好之后就生成了对应的id和key

    ![image-20211031140044606](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211031140044606.png)

3.  在`主题配置文件`中进行修改 Valine，`enable、appid、appkey`三个选项的内容是必须修改的，分别对应步骤2中的注册信息，其他选项根据自己需求设置，修改内容如下所示：

    ```yml
    valine:
      enable: true  
      appid:                      # Your leancloud application appid
      appkey:                     # Your leancloud application appkey
      notify: false # Mail notifier
      verify: false # Verification code
      placeholder: Just go go # Comment box placeholder
      avatar: mm # Gravatar style
      guest_info: nick,mail,link # Custom comment header
      pageSize: 10 # Pagination size
      language: # Language, available values: en, zh-cn
      visitor: false # Article reading statistic
      comment_count: true  # If false, comment count will only be displayed in post page, not in home page
      recordIP: false # Whether to record the commenter IP
      serverURLs: # When the custom domain name is enabled, fill it in here (it will be detected automatically by default, no need to fill in)
      #post_meta_order: 0
    ```

4.  修改完成后，在命令行中依次执行`hexo clean, hexo g, hexo d, hexo s`就可以在本地和远端看到评论

    ![image-20211031141957750](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211031141957750.png)

    >   **说明**：
    >
    >   -   在自己写的博文的[front-matter](https://hexo.io/docs/front-matter.html)中可以通过增加`comments: true/false`来选择打开和关闭本页面对应的评论区。
    >
    >   -   打开站点目录下的`source`目录，对目录页分别进行评论区屏蔽设置，否则在标签页、分类页等都会存在评论区，此处以`tags`项为例，打开`/tags/index.md`，内容如下：
    >
    >       ![image-20211031142902132](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211031142902132.png)

### 24、文章置顶问题

**将站点目录下的`node_modules/hexo-generator-index/lib/generator.js`文件中的内容`全部`换成如下内容**：

```js
'use strict';

var pagination = require('hexo-pagination');

module.exports = function(locals) {
  var config = this.config;
  var posts = locals.posts.sort(config.index_generator.order_by);

  posts.data = posts.data.sort(function(a, b) {
      if(a.top && b.top) {
          if(a.top == b.top) return b.date - a.date;
          else return b.top - a.top;
      }
      else if(a.top && !b.top) {
          return -1;
      }
      else if(!a.top && b.top) {
          return 1;
      }
      else return b.date - a.date;
  });

  var paginationDir = config.pagination_dir || 'page';

  return pagination('', posts, {
    perPage: config.index_generator.per_page,
    layout: ['index', 'archive'],
    format: paginationDir + '/%d/',
    data: {
      __index: true
    }
  });
};
```

**修改完成后，只需要在`front-matter`中设置需要置顶文章的top值，将会根据top值大小来选择置顶顺序，top值越大越靠前。**

![image-20211031155453377](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211031155453377.png)

### 25、添加`emoji`表情渲染器

**在命令行输入`cnpm install hexo-filter-github-emojis --save`安装`hexo-filter-github-emojis`插件**。

**在站点配置文件中添加如下内容**：

```yml
githubEmojis:
  enable: true
  className: github-emoji
  unicode: false
  styles:
  localEmojis:
```

###  26、修改文章底部 tag 图标

**修改主题配置文件 `_config.yml`，打开底部标签**：

```yml
tag_icon: true
```





### 27、修改主题页面布局为圆角

**在 站点目录的`source/_data` 目录下新建 `variables.styl` 文件，填写下面内容**：

```stylus
// 圆角设置
$border-radius-inner     = 20px 20px 20px 20px;
$border-radius           = 20px;
```

**主题配置文件 `_config.yml` 去除 `variables.styl` 的注释**

```yml
variable: source/_data/variables.styl
```

### 28、设置提示块 - note

**主题配置文件 `_config.yml` 中 `note` 选项**：

```yml
note:
  style: simple
  # 是否显示图标
  icons: true 
  light_bg_offset: 0
```

### 29、隐藏底部的强力驱动

**主题配置文件 `_config.yml` 修改 `footer` 选项下的 `powered`**：

```yml
footer:
  # Powered by Hexo & NexT
  powered: false
```





![image-20211031162227019](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211031162227019.png)

### 30、更改新建文章的模板

**默认新建文章需要修改站点目录下的`scaffolds/post.md` 文件**。

**本人的默认新建文件`front-matter`部分的内容**：

![image-20211031162037116](https://dongqing1903.oss-cn-shanghai.aliyuncs.com/img/image-20211031162037116.png)

### 31、添加图片放大预览功能

**在`主题配置文件`中开启`fancybox`选项：**

```yml
fancybox: true
```

## 快速操作

### 1、快捷命令设置

**可以在命令行中输入以下命令，设置Hexo命令快捷方式**：

```shell
cd ~    # 进入家目录下
vim .bash_profile

# 在此文件中设置快捷命令
alias hc="hexo clean"
alias hg="hexo g"
alias hs="hexo s"
alias hd="hexo d"
alias hn="hexo n"
alias blog="cd /D/SoftWare/Blog"
alias post="cd /D/SoftWare/Blog/source/_posts"

# 设置好用输入:wq退出即可，以后就可以使用快捷命令进行操作
```

### 2、创建博文

-   **可以通过命令行创建**

    ```
    hexo n 博文名称
    ```

-   **可以直接在`source/_post`中新建`.md`文件创建新的博文，但需要写入`front-matter`**